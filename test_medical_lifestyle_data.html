<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ»ç–—å²å’Œç”Ÿæ´»æ–¹å¼æ•°æ®æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">åŒ»ç–—å²å’Œç”Ÿæ´»æ–¹å¼æ•°æ®æµ‹è¯•</h1>
        
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">æµ‹è¯•è¡¨å•</h2>
            <form id="test-form" class="space-y-6">
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å¹´é¾„</label>
                        <input type="number" id="test-age" placeholder="è¯·è¾“å…¥å¹´é¾„" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ€§åˆ«</label>
                        <select id="test-gender" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                            <option value="ç”·">ç”·</option>
                            <option value="å¥³">å¥³</option>
                        </select>
                    </div>
                </div>

                <!-- åŒ»ç–—å² -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">åŒ»ç–—å²</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="test-history-diabetes" class="mr-2">
                            <span class="text-sm">ç³–å°¿ç—…</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="test-history-hypertension" class="mr-2">
                            <span class="text-sm">é«˜è¡€å‹</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="test-history-heart" class="mr-2">
                            <span class="text-sm">å¿ƒè„ç—…</span>
                        </label>
                    </div>
                </div>

                <!-- ç”Ÿæ´»æ–¹å¼ -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ç”Ÿæ´»æ–¹å¼</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="test-lifestyle-smoking" class="mr-2">
                            <span class="text-sm">å¸çƒŸ</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="test-lifestyle-exercise" class="mr-2">
                            <span class="text-sm">è§„å¾‹è¿åŠ¨</span>
                        </label>
                    </div>
                </div>

                <div class="space-x-4">
                    <button type="button" onclick="testDataCollection()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                        æµ‹è¯•æ•°æ®æ”¶é›†
                    </button>
                    <button type="button" onclick="testAIPrompt()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
                        æµ‹è¯•AIæç¤ºè¯
                    </button>
                    <button type="button" onclick="fillSampleData()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded">
                        å¡«å……ç¤ºä¾‹æ•°æ®
                    </button>
                </div>
            </form>
        </div>

        <div id="test-results" class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">æµ‹è¯•ç»“æœ</h2>
            <div id="results-content" class="text-gray-600">
                å¡«å†™è¡¨å•å¹¶ç‚¹å‡»æµ‹è¯•æŒ‰é’®...
            </div>
        </div>
    </div>

    <script>
        /**
         * æ¨¡æ‹Ÿæ•°æ®æ”¶é›†å‡½æ•°
         */
        function collectTestHealthData() {
            return {
                age: document.getElementById('test-age')?.value || null,
                gender: document.getElementById('test-gender')?.value || null,
                diabetes: document.getElementById('test-history-diabetes')?.checked || false,
                hypertension: document.getElementById('test-history-hypertension')?.checked || false,
                heartDisease: document.getElementById('test-history-heart')?.checked || false,
                smoking: document.getElementById('test-lifestyle-smoking')?.checked || false,
                exercise: document.getElementById('test-lifestyle-exercise')?.checked || false,
                exerciseFrequency: null,
                bloodPressure: { systolic: 120, diastolic: 80 },
                bmi: 22.5,
                glucose: 95
            };
        }

        /**
         * æµ‹è¯•æ•°æ®æ”¶é›†
         */
        function testDataCollection() {
            const resultsDiv = document.getElementById('results-content');
            
            try {
                const healthData = collectTestHealthData();
                
                resultsDiv.innerHTML = `
                    <div class="text-green-600">
                        <h3 class="font-semibold mb-4">âœ… æ•°æ®æ”¶é›†æµ‹è¯•é€šè¿‡</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-medium mb-2">åŸºæœ¬ä¿¡æ¯</h4>
                                <ul class="text-sm space-y-1">
                                    <li>å¹´é¾„: ${healthData.age || 'æœªå¡«å†™'}</li>
                                    <li>æ€§åˆ«: ${healthData.gender || 'æœªé€‰æ‹©'}</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-medium mb-2">åŒ»ç–—å²</h4>
                                <ul class="text-sm space-y-1">
                                    <li>ç³–å°¿ç—…: ${healthData.diabetes ? 'æ˜¯' : 'å¦'}</li>
                                    <li>é«˜è¡€å‹: ${healthData.hypertension ? 'æ˜¯' : 'å¦'}</li>
                                    <li>å¿ƒè„ç—…: ${healthData.heartDisease ? 'æ˜¯' : 'å¦'}</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-medium mb-2">ç”Ÿæ´»æ–¹å¼</h4>
                                <ul class="text-sm space-y-1">
                                    <li>å¸çƒŸ: ${healthData.smoking ? 'æ˜¯' : 'å¦'}</li>
                                    <li>è§„å¾‹è¿åŠ¨: ${healthData.exercise ? 'æ˜¯' : 'å¦'}</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-medium mb-2">å¥åº·æŒ‡æ ‡</h4>
                                <ul class="text-sm space-y-1">
                                    <li>è¡€å‹: ${healthData.bloodPressure.systolic}/${healthData.bloodPressure.diastolic} mmHg</li>
                                    <li>BMI: ${healthData.bmi}</li>
                                    <li>è¡€ç³–: ${healthData.glucose} mg/dL</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="text-red-600">
                        <h3 class="font-semibold mb-2">âŒ æ•°æ®æ”¶é›†æµ‹è¯•å¤±è´¥</h3>
                        <p>é”™è¯¯: ${error.message}</p>
                    </div>
                `;
            }
        }

        /**
         * æµ‹è¯•AIæç¤ºè¯æ„å»º
         */
        function testAIPrompt() {
            const resultsDiv = document.getElementById('results-content');
            
            try {
                const healthData = collectTestHealthData();
                
                // æ„å»ºAIæç¤ºè¯
                const userPrompt = `è¯·åŸºäºä»¥ä¸‹å¥åº·æ•°æ®ç”Ÿæˆä¸“ä¸šå¥åº·æŠ¥å‘Šï¼š

ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼š
- å¹´é¾„: ${healthData.age || 'æœªæä¾›'}
- æ€§åˆ«: ${healthData.gender || 'æœªæä¾›'}

åŸºç¡€å¥åº·æŒ‡æ ‡ï¼š
- è¡€å‹: ${healthData.bloodPressure.systolic}/${healthData.bloodPressure.diastolic} mmHg
- BMI: ${healthData.bmi}
- è¡€ç³–: ${healthData.glucose} mg/dL

åŒ»ç–—å²ï¼š
- ç³–å°¿ç—…: ${healthData.diabetes ? 'æ˜¯' : 'å¦'}
- é«˜è¡€å‹: ${healthData.hypertension ? 'æ˜¯' : 'å¦'}
- å¿ƒè„ç—…: ${healthData.heartDisease ? 'æ˜¯' : 'å¦'}

ç”Ÿæ´»æ–¹å¼ï¼š
- å¸çƒŸ: ${healthData.smoking ? 'æ˜¯' : 'å¦'}
- è§„å¾‹è¿åŠ¨: ${healthData.exercise ? 'æ˜¯' : 'å¦'}
- è¿åŠ¨é¢‘ç‡: ${healthData.exerciseFrequency || 'æœªæä¾›'}

è¯·åŸºäºä»¥ä¸Šæ•°æ®ç”Ÿæˆä¸€ä»½è¯¦ç»†çš„å¥åº·åˆ†ææŠ¥å‘Šã€‚`;

                resultsDiv.innerHTML = `
                    <div class="text-green-600">
                        <h3 class="font-semibold mb-4">âœ… AIæç¤ºè¯æµ‹è¯•é€šè¿‡</h3>
                        <div class="bg-gray-50 p-4 rounded">
                            <pre class="text-sm whitespace-pre-wrap">${userPrompt}</pre>
                        </div>
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="text-red-600">
                        <h3 class="font-semibold mb-2">âŒ AIæç¤ºè¯æµ‹è¯•å¤±è´¥</h3>
                        <p>é”™è¯¯: ${error.message}</p>
                    </div>
                `;
            }
        }

        /**
         * å¡«å……ç¤ºä¾‹æ•°æ®
         */
        function fillSampleData() {
            document.getElementById('test-age').value = '65';
            document.getElementById('test-gender').value = 'ç”·';
            document.getElementById('test-history-hypertension').checked = true;
            document.getElementById('test-lifestyle-smoking').checked = true;
            
            const resultsDiv = document.getElementById('results-content');
            resultsDiv.innerHTML = `
                <div class="text-blue-600">
                    <h3 class="font-semibold mb-2">ğŸ“ ç¤ºä¾‹æ•°æ®å·²å¡«å……</h3>
                    <p>å·²å¡«å……ï¼š65å²ç”·æ€§ï¼Œæœ‰é«˜è¡€å‹å²ï¼Œå¸çƒŸ</p>
                    <p class="text-sm mt-2">ç°åœ¨å¯ä»¥ç‚¹å‡»"æµ‹è¯•æ•°æ®æ”¶é›†"æˆ–"æµ‹è¯•AIæç¤ºè¯"æ¥éªŒè¯åŠŸèƒ½</p>
                </div>
            `;
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            console.log('åŒ»ç–—å²å’Œç”Ÿæ´»æ–¹å¼æ•°æ®æµ‹è¯•é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>
