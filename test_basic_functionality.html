<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸºæœ¬åŠŸèƒ½æ¸¬è©¦</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        .input-field {
            @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent;
        }
        .card {
            @apply bg-white rounded-xl shadow-lg p-6;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">åŸºæœ¬åŠŸèƒ½æ¸¬è©¦</h1>
        
        <!-- æŒ‰éˆ•æ¸¬è©¦ -->
        <div class="card mb-6">
            <h2 class="text-xl font-semibold mb-4">æŒ‰éˆ•åŠŸèƒ½æ¸¬è©¦</h2>
            <div class="space-y-4">
                <button onclick="testBasicFunction()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    <i class="fa fa-check mr-2"></i>åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
                </button>
                <button onclick="testLocalStorage()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                    <i class="fa fa-database mr-2"></i>æœ¬åœ°å­˜å„²æ¸¬è©¦
                </button>
                <button onclick="testDeviceData()" class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
                    <i class="fa fa-heartbeat mr-2"></i>è¨­å‚™æ•¸æ“šæ¸¬è©¦
                </button>
            </div>
        </div>

        <!-- æ™ºèƒ½è¨­å‚™æ•¸æ“šéŒ„å…¥æ¸¬è©¦ -->
        <div class="card mb-6">
            <h2 class="text-xl font-semibold mb-4">æ™ºèƒ½è¨­å‚™æ•¸æ“šéŒ„å…¥æ¸¬è©¦</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">æ”¶ç¸®å£“ (mmHg)</label>
                    <input type="number" id="test-systolic" placeholder="120" class="input-field" min="60" max="250">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">èˆ’å¼µå£“ (mmHg)</label>
                    <input type="number" id="test-diastolic" placeholder="80" class="input-field" min="40" max="150">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">è„ˆæ (bpm)</label>
                    <input type="number" id="test-pulse" placeholder="72" class="input-field" min="30" max="200">
                </div>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-base mb-2">æ¸¬é‡æ™‚é–“</label>
                    <input type="datetime-local" id="test-time" class="input-field">
                </div>
                <div>
                    <label class="block text-base mb-2">å‚™è¨»</label>
                    <textarea id="test-notes" placeholder="ä¾‹å¦‚ï¼šé¤å¾Œæ¸¬é‡ã€é‹å‹•å¾Œæ¸¬é‡ç­‰" class="input-field" rows="3"></textarea>
                </div>
                <button onclick="testSaveDeviceData()" class="w-full py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl text-lg font-bold hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-xl border-2 border-green-400 transform hover:scale-105">
                    <i class="fa fa-save mr-2 text-xl"></i> ğŸ’¾ ä¿å­˜è®¾å¤‡æ•°æ®
                </button>
            </div>
        </div>

        <!-- æ¸¬è©¦çµæœ -->
        <div class="card">
            <h2 class="text-xl font-semibold mb-4">æ¸¬è©¦çµæœ</h2>
            <div id="test-results" class="bg-gray-50 p-4 rounded text-sm font-mono">
                <p class="text-gray-500">é»æ“Šä¸Šæ–¹æŒ‰éˆ•é€²è¡Œæ¸¬è©¦...</p>
            </div>
        </div>
    </div>

    <script>
        // åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
        function testBasicFunction() {
            const resultDiv = document.getElementById('test-results');
            resultDiv.innerHTML = '<div class="text-green-600">âœ… åŸºæœ¬åŠŸèƒ½æ­£å¸¸ï¼JavaScript é‹è¡Œæ­£å¸¸ã€‚</div>';
        }

        // æœ¬åœ°å­˜å„²æ¸¬è©¦
        function testLocalStorage() {
            try {
                const testData = { test: 'data', timestamp: new Date().toISOString() };
                localStorage.setItem('test', JSON.stringify(testData));
                const retrieved = JSON.parse(localStorage.getItem('test'));
                
                if (retrieved.test === 'data') {
                    document.getElementById('test-results').innerHTML = '<div class="text-green-600">âœ… æœ¬åœ°å­˜å„²åŠŸèƒ½æ­£å¸¸ï¼</div>';
                } else {
                    document.getElementById('test-results').innerHTML = '<div class="text-red-600">âŒ æœ¬åœ°å­˜å„²æ•¸æ“šä¸åŒ¹é…</div>';
                }
            } catch (error) {
                document.getElementById('test-results').innerHTML = `<div class="text-red-600">âŒ æœ¬åœ°å­˜å„²éŒ¯èª¤: ${error.message}</div>`;
            }
        }

        // è¨­å‚™æ•¸æ“šæ¸¬è©¦
        function testDeviceData() {
            try {
                const deviceData = {
                    id: Date.now(),
                    type: 'è¡€å‹',
                    device: 'è¡€å‹è®¡',
                    time: new Date().toISOString().slice(0, 16),
                    notes: 'æ¸¬è©¦æ•¸æ“š',
                    timestamp: new Date().toISOString(),
                    data: {
                        systolic: 120,
                        diastolic: 80,
                        pulse: 72,
                        assessment: {
                            level: 'æ­£å¸¸',
                            advice: 'è¡€å£“æ­£å¸¸'
                        }
                    }
                };
                
                const healthRecords = JSON.parse(localStorage.getItem('healthRecords') || '[]');
                healthRecords.push(deviceData);
                localStorage.setItem('healthRecords', JSON.stringify(healthRecords));
                
                document.getElementById('test-results').innerHTML = '<div class="text-green-600">âœ… è¨­å‚™æ•¸æ“šä¿å­˜æˆåŠŸï¼</div>';
            } catch (error) {
                document.getElementById('test-results').innerHTML = `<div class="text-red-600">âŒ è¨­å‚™æ•¸æ“šéŒ¯èª¤: ${error.message}</div>`;
            }
        }

        // ä¿å­˜è¨­å‚™æ•¸æ“šæ¸¬è©¦
        function testSaveDeviceData() {
            const systolic = parseInt(document.getElementById('test-systolic').value);
            const diastolic = parseInt(document.getElementById('test-diastolic').value);
            const pulse = parseInt(document.getElementById('test-pulse').value);
            const time = document.getElementById('test-time').value || new Date().toISOString().slice(0, 16);
            const notes = document.getElementById('test-notes').value;
            
            if (!systolic || !diastolic || !pulse) {
                document.getElementById('test-results').innerHTML = '<div class="text-red-600">âŒ è«‹å¡«å¯«å®Œæ•´çš„è¡€å£“æ•¸æ“š</div>';
                return;
            }
            
            try {
                const deviceData = {
                    id: Date.now(),
                    type: 'è¡€å‹',
                    device: 'è¡€å‹è®¡',
                    time: time,
                    notes: notes,
                    timestamp: new Date().toISOString(),
                    data: {
                        systolic: systolic,
                        diastolic: diastolic,
                        pulse: pulse,
                        assessment: {
                            level: systolic < 120 && diastolic < 80 ? 'æ­£å¸¸' : 'åé«˜',
                            advice: systolic < 120 && diastolic < 80 ? 'è¡€å£“æ­£å¸¸' : 'è¡€å£“åé«˜'
                        }
                    }
                };
                
                const healthRecords = JSON.parse(localStorage.getItem('healthRecords') || '[]');
                healthRecords.push(deviceData);
                localStorage.setItem('healthRecords', JSON.stringify(healthRecords));
                
                // æ¸…ç©ºè¡¨å–®
                document.getElementById('test-systolic').value = '';
                document.getElementById('test-diastolic').value = '';
                document.getElementById('test-pulse').value = '';
                document.getElementById('test-time').value = '';
                document.getElementById('test-notes').value = '';
                
                document.getElementById('test-results').innerHTML = '<div class="text-green-600">âœ… è¨­å‚™æ•¸æ“šä¿å­˜æˆåŠŸï¼è¡¨å–®å·²æ¸…ç©ºã€‚</div>';
            } catch (error) {
                document.getElementById('test-results').innerHTML = `<div class="text-red-600">âŒ ä¿å­˜å¤±æ•—: ${error.message}</div>`;
            }
        }

        // é é¢åŠ è¼‰å®Œæˆå¾Œè¨­ç½®é»˜èªæ™‚é–“
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const timeString = now.toISOString().slice(0, 16);
            document.getElementById('test-time').value = timeString;
        });
    </script>
</body>
</html>
